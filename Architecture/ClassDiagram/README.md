# Диаграмма классов
![изображение](https://user-images.githubusercontent.com/44027333/199336707-c4446525-afb1-4707-b677-72dd8ae3bf8b.png)

Знак "+" перед полем или методом означает уровень доступа *public*, а знак "-" означает уровень доступа *private*.

## Список классов

1. **GameCycle** - основной цикл игры, где происходит создание мира, user-интерфейса и где происходит запуск.

   ###### Поля:
   -world: World - экземпляр класса World, хранящий сведение о мире игре \
   -ui: UserInterface - экземпляр класса UserInterface, позволяющий обрабатывать действия пользователя
   
   ###### Методы: 
   +launch() - запуск игры

2. **UserInterface** - интерфейс взаимодействия с пользователем (пользователь взаимодействует с клавиатурой и мышью, а этот класс обрабатывает эти действия). 

   ###### Методы: 
   +getInputEvent() : InputEvent - получить информацию о действии пользователя\
   +addOnUpdateFrameListener() - метод, позволяющий зарегистрировать колбэк, который будет использоваться при каждом обновлении кадра и 
   который будет обновлять состояние игрового мира так, чтобы подготовить следующий кадр
   
3. **World** - класс, который содержит все данные о мире: карту, сущности, пули, игрока и скорость течения времени. 

   ###### Поля:
   -map: LevelMap - карта уровня \
   -entities: List<Entity> - список сущностей \
   -bullets: List<Bullet> - список пуль \
   -player: Entity - сущность, обозначающая игрока \
   -timeSpeed: Float - скорость течения времени в данный момент
   
   ###### Методы: 
   +passTime() - обновление состояния игры

4. **WorldGenerator** - класс, который генерирует мир (экземпляр класса World).

   ###### Методы:
   +generateWorld() : World - сгенерировать мир

5. **LevelMap** - карта игры, которая содержит матрицу, состояющую из клеток.

   ###### Поля:
   -grid: Matrix2D<Cell> - матрица клеток карты
   ###### Методы: 
   +getGrid() : Matrix2D<Cell> - getter для матрицы клеток карты

6. **Bullet** - класс, содержащий данные о пуле: координаты и тип.

   ###### Поля:
   +position: Coordinates - координаты пули \
   +type: BulletType - тип пули

7. **BulletType** - класс, содержащий информацию о типе пули.

   ###### Поля:
   +damage: Int - урон \
   +maxDistance: Int - максимальная дистанция \
   +speed: Int - скорость передвижения \
   +name: String - название типа

8. **Entity** - класс, содержащий сведения о сущности игры (сущностью может быть игрок или враг).

   ###### Поля:
   +position: Coordinates - координаты сущности \
   +type: EntityType - тип сущности \
   +behavior: Behavior - поведение \
   +isPlayer: bool - является ли сущность игроком \
   +hp: Int - уровень здоровья
   ###### Методы: 
   +IsAlive(): bool - жива ли сущность

9. **EntityType** - класс, содержащий данные о типе сущности игры.

   ###### Поля:
   +baseHp: Int - базовый уровень здоровья\
   +name: String - имя\
   +baseMovementSpeed: Int - базовая скорость передвижения

10. **Coordinates** - координаты.

    ###### Поля:
    +x: Int - координата по горизонтали\
    +y: Int - координата по вертикали

11. **Behavior** - класс, управляющий поведением сущности.

    ###### Методы: 
    +setAction(action: Action) - установить действие сущности\
    +getNextAction(entity: Entity, world: World) : Action - получить следующее действие сущности
    
12. **Cell** - клетка карты.

    ###### Поля:
    +position: Coordinates - координаты клетки\
    +tileType: TileType - тип клетки
    ###### Методы: 
    +rebuild() - обновить клетку\
    +isBlocked() : Boolean - вернуть true или false, в зависимости от того, заблокирована клетка или нет

13. **TileType** - класс, содержащий данные о типе клетки.

    ###### Поля:
    +blocks: Boolean - может ли сущность ступить на эту клетку

14. **Action** - класс, выполняющий действие, заданное поведением сущности.

    ###### Методы: 
    +onPerform(world: World, entity: Entity) -> ActionResult - выполнить действие
    
    ##### Классы-реализации:

    1. **Loot**
       ###### Методы: 
       +onPerform(world: World, entity: Entity) -> ActionResult - выполнить действие
    2. **Melee**
       ###### Методы: 
       +onPerform(world: World, entity: Entity) -> ActionResult - выполнить действие
    3. **Wait** 
       ###### Методы: 
       +onPerform(world: World, entity: Entity) -> ActionResult - выполнить действие
    4. **Walk**
       ###### Методы: 
       +onPerform(world: World, entity: Entity) -> ActionResult - выполнить действие
    5. **WalkToPoint**
       ###### Методы: 
       +onPerform(world: World, entity: Entity) -> ActionResult - выполнить действие

15. **ActionResult** - класс, содержащий данные о результате действия.

    ###### Поля:
    +type: String - тип результата действия
    
## Связи

1. **GameCycle**

2. **UserInterface** 
   * Композиция: является частью GameCycle
   
3. **World** 
   * Композиция: является частью GameCycle

4. **WorldGenerator** 
   * Зависимость: зависит от World

5. **LevelMap** 
   * Композиция: является частью World
   * Зависимость: зависит от Cell

6. **Bullet** 
   * Композиция: является частью World

7. **BulletType** 
   * Композиция: является частью Bullet
   
8. **Entity** 
   * Композиция: является частью World

9. **EntityType**
   * Композиция: является частью Entity

10. **Coordinates** 
    * Композиция: является частью Cell 
    * Композиция: является частью Entity
    * Композиция: является частью Bullet

11. **Behavior** 
    * Композиция: является частью Entity
    * Зависимость: зависит от Entity
    * Зависимость: зависит от World
    * Зависимость: зависит от Action
    
12. **Cell** 

13. **TileType** 
    Композиция: является частью Cell

14. **Action** 
    * Зависимость: зависит от World
    * Зависимость: зависит от Entity
    * Зависимость: зависит от ActionResult
    
    ##### Классы-реализации:

    1. **Loot**
       * Агрегация с Action
       * Зависимость: зависит от World
       * Зависимость: зависит от ActionResult
       * Зависимость: зависит от Entity

    2. **Melee**
       * Агрегация с Action
       * Зависимость: зависит от World
       * Зависимость: зависит от ActionResult
       * Зависимость: зависит от Entity

    3. **Wait** 
       * Агрегация с Action
       * Зависимость: зависит от World
       * Зависимость: зависит от ActionResult
       * Зависимость: зависит от Entity

    4. **Walk**
       * Агрегация с Action
       * Зависимость: зависит от World
       * Зависимость: зависит от ActionResult
       * Зависимость: зависит от Entity

    5. **WalkToPoint**
       * Агрегация с Action
       * Зависимость: зависит от World
       * Зависимость: зависит от ActionResult
       * Зависимость: зависит от Entity

15. **ActionResult** 
